pipeline:
  run_golang:
    group: build
    image: golang
    commands:
      - go build
      - go test
      
  run_bash:
    group: build
    image: alpine
    commands:
      - echo "running env command"
      - env

  slack
    image: plugins/slack
    webhook:
      from_secret: slack_webhook
      channel: system_events
      icon_emoji: :male-police-officer:
      template: >
        {{#success build.status}}
           build {{build.number}} status: *{{uppercase build.status}}*
          by: {{lowercase build.author}}
          more info: {{build.link}}
        {{else}}
          build {{build.number}} failed. Fix me please.
        {{/success}}
      when:
        status: [ success, failure ]
